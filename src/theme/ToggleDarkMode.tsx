"use client";

import { useEffect, useState } from "react";
import { useTheme } from "next-themes";

function ToggleDarkMode() {
	const { theme, setTheme } = useTheme();
	const [currentTheme, setCurrentTheme] = useState(theme);
	const [mounted, setMounted] = useState(false);

	useEffect(() => {
		setMounted(true);
	}, []);

	if (!mounted) return null;

	return (
		<>
			<button
				onClick={() => {
					setCurrentTheme(currentTheme === "dark" ? "light" : "dark");
					setTimeout(() => {
						setTheme(theme === "dark" ? "light" : "dark");
					}, 500);
				}}
				className="relative h-8 w-8 cursor-pointer overflow-hidden rounded-full z-50">
				<div className="h-8 w-8 absolute top-0 right-0 border-2 border-solid border-black dark:border-white  z-20 rounded-full"></div>
				<div
					className={`absolute top-0 bg-muted rounded-full h-8 w-8 transition-transform duration-300 ease-in-out   border-transparent ${
						currentTheme === "dark"
							? "translate-y-0"
							: "-translate-y-9"
					}`}
				/>
				<div
					className={`h-8 w-8 flex justify-center items-center absolute -top-px transition-transform duration-500 ease-in border-2 pl-px border-transparent ${
						currentTheme === "dark"
							? "translate-y-0"
							: "-translate-y-9"
					}`}>
					<svg
						width={20}
						height={20}
						viewBox="0 0 20 20"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
						className="w-5 h-5 relative"
						preserveAspectRatio="xMidYMid meet">
						<path
							d="M11.1468 5.33766C11.2472 5.33766 11.3057 5.27087 11.3225 5.17873C11.5822 3.78944 11.5736 3.75587 13.0218 3.47123C13.1222 3.45444 13.1807 3.40409 13.1807 3.30373C13.1807 3.1948 13.1222 3.1448 13.0218 3.12802C11.5736 2.83516 11.5822 2.81016 11.3225 1.42052C11.3057 1.32837 11.2475 1.26123 11.1468 1.26123C11.0465 1.26123 10.9961 1.32837 10.9793 1.42052C10.7115 2.8098 10.7282 2.8348 9.27181 3.12766C9.17967 3.1448 9.11288 3.1948 9.11288 3.30373C9.11288 3.40409 9.17967 3.45444 9.27181 3.47123C10.7368 3.75587 10.7115 3.78909 10.9793 5.17873C10.9961 5.27087 11.0465 5.33766 11.1468 5.33766ZM15.1564 10.9966C15.3068 10.9966 15.4157 10.8877 15.4325 10.7287C15.7086 8.48552 15.8175 8.41837 18.0861 8.06694C18.27 8.03337 18.3789 7.9498 18.3789 7.7823C18.3789 7.62337 18.27 7.52266 18.1193 7.49766C15.8343 7.0623 15.7086 7.07909 15.4325 4.83587C15.4157 4.67694 15.3068 4.56802 15.1564 4.56802C14.9972 4.56802 14.8886 4.67694 14.8718 4.82766C14.5789 7.09587 14.5032 7.17123 12.1847 7.49766C12.034 7.51444 11.9254 7.62337 11.9254 7.7823C11.9254 7.94123 12.034 8.03337 12.1847 8.06694C14.5032 8.49373 14.5872 8.5023 14.8718 10.7455C14.8782 10.8158 14.9113 10.8809 14.9642 10.9276C15.0172 10.9743 15.0859 10.999 15.1564 10.9966ZM8.85324 18.7394C11.8832 18.7394 14.3025 17.2073 15.4575 14.6294C15.6 14.3198 15.5747 14.0519 15.4243 13.9094C15.2904 13.7841 15.0557 13.7673 14.7964 13.8594C14.1184 14.1273 13.3231 14.2612 12.4107 14.2612C8.61074 14.2612 6.18324 11.8837 6.18324 8.17552C6.18324 7.12087 6.38395 6.10837 6.64359 5.58944C6.78574 5.29659 6.78574 5.04516 6.66002 4.88587C6.50967 4.71873 6.24181 4.69373 5.91538 4.81909C3.34538 5.83159 1.62109 8.56087 1.62109 11.6241C1.62109 15.7005 4.62609 18.7394 8.85324 18.7394Z"
							fill="white"
						/>
					</svg>
				</div>
				<div
					className={`absolute -z-10 top-0 bg-white rounded-full h-8 w-8 transition-transform duration-300 ease-in-out border-transparent ${
						currentTheme === "light"
							? "translate-y-0"
							: "translate-y-9"
					}`}
				/>
				<div
					className={`h-8 w-8 flex justify-center items-center absolute top-0 transition-transform duration-500 border-2 ease-in border-transparent ${
						currentTheme === "light"
							? "translate-y-0"
							: "translate-y-9"
					}`}>
					<svg
						width={20}
						height={20}
						viewBox="0 0 20 20"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
						className="w-5 h-5 relative"
						style={{
							filter: "drop-shadow(0px 0px 4px rgba(255,212,0,0.5))",
						}}
						preserveAspectRatio="xMidYMid meet">
						<path
							d="M9.99951 15.9331C10.1939 15.9331 10.3806 16.0105 10.5181 16.1479C10.6556 16.2855 10.7329 16.472 10.7329 16.6665V17.4995C10.7329 17.694 10.6556 17.8805 10.5181 18.0181C10.3805 18.1556 10.194 18.2329 9.99951 18.2329C9.80516 18.2328 9.61839 18.1555 9.48096 18.0181C9.34365 17.8806 9.26611 17.6938 9.26611 17.4995V16.6665C9.26611 16.4721 9.34355 16.2855 9.48096 16.1479C9.61839 16.0105 9.80516 15.9332 9.99951 15.9331ZM5.26221 13.9819C5.44844 13.9762 5.63027 14.0423 5.77002 14.1655C5.90956 14.2887 5.99748 14.4607 6.01514 14.646C6.03262 14.8308 5.97799 15.0145 5.86475 15.1616L5.8042 15.2329L5.21533 15.8218C5.08346 15.9532 4.90629 16.0289 4.72021 16.0347C4.53399 16.0404 4.35215 15.9753 4.2124 15.8521C4.0727 15.7288 3.98495 15.557 3.96729 15.3716C3.95403 15.2324 3.98102 15.0933 4.04346 14.9702L4.11768 14.853L4.17822 14.7847L4.76709 14.1958C4.89901 14.0643 5.07606 13.9877 5.26221 13.9819ZM14.7183 13.9907C14.8623 13.9895 15.0023 14.031 15.1216 14.1079L15.2339 14.1968L15.8218 14.7847C15.9546 14.9228 16.0275 15.1076 16.0259 15.2993C16.0242 15.4914 15.9477 15.6751 15.812 15.811C15.676 15.947 15.4916 16.0242 15.2993 16.0259C15.1549 16.0271 15.0146 15.986 14.895 15.9087L14.7837 15.8208L14.1958 15.2329C14.0629 15.0948 13.9892 14.91 13.9907 14.7183C13.9924 14.526 14.0696 14.3415 14.2056 14.2056C14.3415 14.0696 14.526 13.9924 14.7183 13.9907ZM9.99951 5.1001C11.2989 5.1001 12.5455 5.61596 13.4644 6.53467C14.3832 7.45352 14.8998 8.70007 14.8999 9.99951C14.8999 11.2991 14.3833 12.5454 13.4644 13.4644C12.5454 14.3833 11.2991 14.8999 9.99951 14.8999C8.70009 14.8998 7.45351 14.3832 6.53467 13.4644C5.61596 12.5455 5.1001 11.2989 5.1001 9.99951C5.10018 8.70008 5.61583 7.45352 6.53467 6.53467C7.45351 5.61583 8.70009 5.1002 9.99951 5.1001ZM16.6665 9.26611H17.4995C17.6938 9.26611 17.8806 9.34365 18.0181 9.48096C18.1555 9.61841 18.2328 9.80514 18.2329 9.99951C18.2329 10.194 18.1556 10.3805 18.0181 10.5181C17.8805 10.6556 17.694 10.7329 17.4995 10.7329H16.6665C16.472 10.7329 16.2855 10.6556 16.1479 10.5181C16.0105 10.3806 15.9331 10.1939 15.9331 9.99951C15.9332 9.80514 16.0105 9.61841 16.1479 9.48096C16.2855 9.34353 16.4721 9.26613 16.6665 9.26611ZM3.3335 9.26611C3.52014 9.26642 3.69966 9.33825 3.83545 9.46631C3.97128 9.59454 4.05293 9.77008 4.06396 9.95654C4.07491 10.143 4.01479 10.3269 3.89502 10.4702C3.77581 10.6126 3.6066 10.7042 3.42236 10.7271L3.32764 10.7329H2.50049C2.31358 10.7327 2.13347 10.661 1.99756 10.5327C1.8617 10.4044 1.77999 10.229 1.76904 10.0425C1.75818 9.85601 1.8181 9.67206 1.93799 9.52881C2.05795 9.38548 2.22895 9.29405 2.41455 9.27197L2.41357 9.271L2.50635 9.26611H3.3335ZM15.3032 3.96338C15.4492 3.96338 15.5908 4.00659 15.7104 4.08643L15.8218 4.17822C15.9592 4.31573 16.0366 4.50239 16.0366 4.69678C16.0366 4.84238 15.9931 4.98359 15.9136 5.10303L15.8218 5.21533L15.2329 5.8042L15.231 5.80518C15.1635 5.87505 15.0829 5.93082 14.9937 5.96924C14.9043 6.00764 14.8077 6.02793 14.7104 6.02881C14.6132 6.02965 14.5163 6.01189 14.4263 5.9751C14.3362 5.93825 14.2539 5.88373 14.1851 5.81494C14.1162 5.7461 14.0618 5.66384 14.0249 5.57373C13.988 5.48361 13.9694 5.38692 13.9702 5.28955C13.9711 5.19218 13.9914 5.09582 14.0298 5.00635C14.049 4.96169 14.0726 4.9192 14.1001 4.87939L14.1948 4.76807L14.7847 4.17822C14.9222 4.04074 15.1088 3.96338 15.3032 3.96338ZM4.65088 3.96436C4.78454 3.95601 4.91726 3.98446 5.03467 4.04541L5.146 4.1167L5.21924 4.18213L5.8042 4.76709C5.93564 4.89902 6.01234 5.07607 6.01807 5.26221C6.02375 5.44844 5.9577 5.63027 5.83447 5.77002C5.71126 5.90963 5.53937 5.99748 5.354 6.01514C5.21483 6.02835 5.07564 6.00138 4.95264 5.93896L4.83643 5.86475L4.76318 5.80029L4.17822 5.21533C4.04081 5.07788 3.96345 4.89113 3.96338 4.69678C3.96338 4.55092 4.00668 4.40914 4.08643 4.28955L4.17822 4.17822C4.3045 4.05196 4.47266 3.97556 4.65088 3.96436ZM9.99951 1.76611C10.1938 1.76611 10.3806 1.84365 10.5181 1.98096C10.6555 2.11841 10.7328 2.30514 10.7329 2.49951V3.3335C10.7328 3.52787 10.6555 3.7146 10.5181 3.85205C10.3806 3.98936 10.1938 4.06689 9.99951 4.06689C9.80516 4.06679 9.61839 3.98949 9.48096 3.85205C9.34352 3.7146 9.2662 3.52786 9.26611 3.3335V2.49951C9.2662 2.30515 9.34352 2.1184 9.48096 1.98096C9.61839 1.84352 9.80516 1.76621 9.99951 1.76611Z"
							fill="#FFD400"
							stroke="#E3A815"
							strokeWidth="0.2"
						/>
					</svg>
				</div>
			</button>
		</>
	);
}

export default ToggleDarkMode;
